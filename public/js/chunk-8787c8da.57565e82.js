(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8787c8da"],{"05c2":function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header card-header-icon card-header-rose"},[e("div",{staticClass:"card-icon"},[e("router-link",{attrs:{to:{name:"uniCbcc"}}},[e("i",{staticClass:"material-icons",staticStyle:{color:"#FFFFFF"}},[t._v("arrow_back")])])],1),e("div",{staticClass:"card-icon card-icon-right"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(n){t.dialogVisible=!0}}},[e("i",{staticClass:"material-icons",staticStyle:{color:"#FFFFFF"}},[t._v("playlist_add")])])]),e("h4",{staticClass:"card-title"},[t._v("Danh sách phòng ban")])]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"table-responsive"},[e("table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table"},[t._m(0),e("tbody",t._l(t.phongBan,(function(n,a){return e("tr",{key:a},[e("td",[t._v(t._s(n.id))]),e("td",[e("span",{directives:[{name:"show",rawName:"v-show",value:t.editPhongBanId!==n.id,expression:"editPhongBanId !== value.id"}]},[t._v(t._s(n.name))]),t.editPhongBanId===n.id?e("input",{directives:[{name:"model",rawName:"v-model",value:t.editPhongBan,expression:"editPhongBan"}],staticClass:"el-input__inner",attrs:{type:"text"},domProps:{value:t.editPhongBan},on:{input:function(n){n.target.composing||(t.editPhongBan=n.target.value)}}}):t._e()]),e("td",[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.edit(n)}}},[t._v(t._s(t.editPhongBanId!==n.id?"Sửa":"Cập nhật"))]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.remove(n)}}},[t._v("Xóa")])],1)])})),0)])])])]),e("el-dialog",{attrs:{title:"Tips",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(n){t.dialogVisible=n}}},[e("span",[t._v("Tạo phòng ban mới")]),t._l(t.errors.all(),(function(t){return e("el-alert",{key:t,attrs:{title:t,type:"error"}})})),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tenPhongBan,expression:"tenPhongBan"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"tenPhongBan"},domProps:{value:t.tenPhongBan},on:{input:function(n){n.target.composing||(t.tenPhongBan=n.target.value)}}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(n){t.dialogVisible=!1}}},[t._v("Quay lại")]),e("el-button",{attrs:{type:"primary"},on:{click:t.taoPhongBan}},[t._v("Tạo mới")])],1)],2)],1)])},i=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("thead",{staticClass:"text-primary"},[e("th",[t._v("ID")]),e("th",[t._v("Tên")]),e("th",[t._v("Hành động")])])}],o=(e("6b54"),e("2397"),e("7f7f"),e("d225")),s=e("b0b4"),r=e("4e2b"),c=e("308d"),d=e("6bb5"),l=e("9ab4"),u=e("60a3"),h=e("2ef0");function g(t){var n=p();return function(){var e,a=Object(d["a"])(t);if(n){var i=Object(d["a"])(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return Object(c["a"])(this,e)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var v=function(t){Object(r["a"])(e,t);var n=g(e);function e(){var t;return Object(o["a"])(this,e),t=n.apply(this,arguments),t.loading=!0,t.dialogVisible=!1,t.phongBan=[],t.tenPhongBan="",t.editPhongBan="",t.editPhongBanId=-1,t}return Object(s["a"])(e,[{key:"taoPhongBan",value:function(){var t=this;""!==this.tenPhongBan?this.axios.post("department/create",{name:this.tenPhongBan}).then((function(n){t.$notify.success("Tạo mới thành công!"),t.phongBan.push(n.data.data.departments),t.dialogVisible=!1})):this.$notify.warning("Vui lòng điền tên phòng ban")}},{key:"init",value:function(){var t=this;this.axios.get("department/list").then((function(n){t.phongBan=n.data.data.departments,t.loading=!1}))}},{key:"edit",value:function(t){var n=this;t.id===this.editPhongBanId?this.axios.post("department/update/"+t.id,{name:this.editPhongBan}).then((function(){t.name=n.editPhongBan,n.$message.success("Sửa thành công!"),n.editPhongBanId=-1,n.editPhongBan=""})).catch((function(){n.editPhongBanId=-1,n.editPhongBan=""})):(this.editPhongBanId=t.id,this.editPhongBan=t.name)}},{key:"remove",value:function(t){var n=this;this.$confirm("Bạn chắc chắn muốn xóa cán bộ này ?","Cảnh báo",{confirmButtonText:"Xóa",cancelButtonText:"Quay lại",type:"warning"}).then((function(){n.axios.post("department/delete/"+t.id).then((function(){n.phongBan=Object(h["dropRightWhile"])(n.phongBan,(function(n){return n.id===t.id})),n.$message.success("Xóa thành công!")}))})).catch((function(){n.$message.info("Xóa thất bại!")}))}},{key:"created",value:function(){this.init()}}]),e}(u["c"]);v=Object(l["a"])([u["a"]],v);var f=v,m=f,b=e("2877"),B=Object(b["a"])(m,a,i,!1,null,"5de16014",null);n["default"]=B.exports},"7f7f":function(t,n,e){var a=e("86cc").f,i=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in i||e("9e1e")&&a(i,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-8787c8da.57565e82.js.map